def maxArrayValue(arr):
    #Invert the signs of the elements at odd indices so that we can just add them
    #as we iterate through the array without having to do the operation described
    #in the question. It yields the same result.
    #Eg:(a[0]+a[2]) - (a[1]+a[3]) = a[0]-a[1]+a[2]-a[3]
    
    for i in range(1, len(arr), 2):
        arr[i] *= -1
    
    #Tricky Part!!! Use Dynamic Programming. Intuition needed.    
    max_so_far = 0
    max_total = 0
    
    for a in arr:
        max_total = max(max_total, abs(a), abs(max_so_far + a))
        
        if a + max_so_far < max_total:
            max_so_far = 0
        
        max_so_far += a
            
    return max_total**2
    
arr = [-1, 2, 3, 4, -5]
print(maxArrayValue(arr))
